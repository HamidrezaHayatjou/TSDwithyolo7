
# راهنمای تست کردن ماژول‌ها

## تست کردن تکی ماژول‌ها

### مراحل:

1. **گرفتن وزن‌ها با استفاده از DVC:**

   قبل از هر چیزی مطمئن شوید که وزن‌های لازم را دریافت کرده‌اید. برای این کار از دستور زیر استفاده کنید:

   ```bash
   dvc pull -r fteam_storage tests/pipeline_testing.zip.dvc
   ```

   این دستور فایل فشرده‌ی `pipeline_testing.zip` را از DVC دریافت می‌کند و مطمئن می‌شود که شما تمام وزن‌های موردنیاز را دارید.

2. **تنظیم مسیر Checkpoint در فایل YAML:**

   حتماً اطمینان حاصل کنید که مسیر checkpoint‌های هر ماژول در فایل `.yaml` مربوطه به درستی تنظیم شده است. فایل `.yaml` باید شامل مسیر درست وزن‌های استفاده شده در هر ماژول باشد.

3. **اجرای تست برای یک ماژول:**

   بعد از تنظیم مسیر checkpoint‌ها و دریافت وزن‌های مربوطه، می‌توانید هر ماژول را به صورت تکی تست کنید. برای این کار به دایرکتوری `tests` رفته و دستور زیر را اجرا کنید:

   ```bash
   pytest -v module_name.py
   ```

   در این دستور، `module_name.py` نام فایل پایتون مربوط به ماژولی است که می‌خواهید آن را تست کنید.

---

## تست یکباره همه ماژول‌ها

برای تست یکباره تمام ماژول‌ها، می‌توانید از `Makefile` استفاده کنید که به صورت خودکار تمامی مراحل را برای شما انجام می‌دهد. مراحل آن به این صورت است:

1. **اجرای تست با استفاده از Makefile:**

   برای اجرای تمامی تست‌ها، از دستور زیر استفاده کنید:

   ```bash
   make test-pipeline
   ```

   این دستور تمام تست‌های موجود در دایرکتوری `tests` را اجرا می‌کند و به شما گزارش کامل از نتیجه‌ی تست‌ها می‌دهد.

2. **نظافت فایل‌های تست و خروجی‌ها:**

   برای حذف فایل‌های خروجی تست‌ها یا پاکسازی داده‌های تست، می‌توانید از دستورات زیر در `Makefile` استفاده کنید:

   - برای پاکسازی نتایج تست‌های قبلی:
     ```bash
     make clean-results
     ```

   - برای حذف داده‌های تست:
     ```bash
     make clean-data
     ```

   با این دستورات می‌توانید به راحتی تمام فایل‌های قدیمی را حذف کنید و تست‌ها را از نو اجرا کنید.
